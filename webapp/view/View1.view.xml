<mvc:View controllerName="com.docqanda.docqa.controller.View1"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:u="sap.ui.unified"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.f"
	xmlns:card="sap.f.cards"
    xmlns="sap.m">
    <Page id="page" title="Document QA" class="page">
    <customHeader>
	<Bar>
		<contentLeft>
			<Title text="Document QA Assistant" />
		</contentLeft>
		<contentRight>
			<Select id="themeSelector" change="onThemeChange" selectedKey="sap_fiori_3">
				<items>
					<core:Item key="sap_fiori_3" text="Morning (Light)" />
					<core:Item key="sap_fiori_3_dark" text="Evening (Dark)" />
					<core:Item key="sap_fiori_3_hcb" text="High Contrast Black" />
					<core:Item key="sap_fiori_3_hcw" text="High Contrast White" />
				</items>
			</Select>
             <Button text="Chart" press="onChartPress" icon="sap-icon://business-objects-experience" class="sapUiTinyMarginBegin" />
               <Button text="History" press="onHistoryPress" icon="sap-icon://history" class="sapUiTinyMarginBegin"/>
                 <Button text="Summary" press="onSummaryPress" icon="sap-icon://attachment-text-file" class="sapUiTinyMarginBegin"/>
               <!-- newly modified 13-08-2025 -->
               <ComboBox
    id="uploadedDocsCombo"
    placeholder="Select an uploaded document"
    items="{
        path: 'docModel>/uploadedDocs'
    }"
    selectionChange=".onDocumentSelect">
    <core:Item key="{docModel>ID}" text="{docModel>filename}" />
</ComboBox>
		</contentRight>
	</Bar>
</customHeader>
       
    <content>
    	<!-- <FlexBox class="flxBox"
				height="20px"
				alignItems="Start"
				justifyContent="End">
				<Select id="themeSelector" change="onThemeChange" selectedKey="sap_fiori_3">
                    <items>
                        <core:Item key="sap_fiori_3" text="Morning (Light)" />
                        <core:Item key="sap_fiori_3_dark" text="Evening (Dark)" />
                        <core:Item key="sap_fiori_3_hcb" text="High Contrast Black" />
                        <core:Item key="sap_fiori_3_hcw" text="High Contrast White" />
                    </items>
                </Select>
			</FlexBox> -->
             
           <HBox >
             
             	<f:Card class="sapUiSmallMargin" width="45rem" height="32rem">
		<f:header>
			<card:Header title="UPLOAD" subtitle="" />
		</f:header>
		<f:content>
		 <!-- File Upload Section -->
         <VBox>
                <Panel headerText="📁 Upload Documents" expandable="true" expanded="true" class="sapUiResponsiveMargin"  width="40rem"  height="12rem">
                    <VBox class="sapUiTinyMargin">
                        <u:FileUploader 
                           class="glow-border"
                            id="fileUploader"
                            change="onFileChange"
                            buttonText="Upload"
                            uploadUrl="upload/"
                            uploadOnChange="false"
                            fileType="pdf,docx,txt,xlsx,pptx"
                            style="Emphasized"/>
                        <Text text="Supported formats: PDF, Word, Excel, Text, PPTX" class="uploadTxt" />
                        <VBox id="uploadContainer" />
                    </VBox>
                </Panel>
   
                <!-- Web Scraping Section -->
                <Panel headerText="🌐 Scrape Web Content" expandable="true" expanded="true" class="sapUiResponsiveMargin" width="40rem"  height="14rem">
                    <HBox class="sapUiLargeMargin">
                        <Input id="urlInput" placeholder="Enter webpage URL to scrape..." width="24rem" />
                        <Button text="Scrape" icon="sap-icon://world" press="onScrapeWebPage" type="Emphasized" class="sapUiTinyMarginBegin" />
                    </HBox>
                </Panel>
                </VBox>
		</f:content>
	</f:Card>
            	<f:Card class="sapUiSmallMargin" width="45rem" height="32rem">
		<f:header>
			<card:Header title="RETRIEVE ANSWER" subtitle="" />
		</f:header>
		<f:content>
        <VBox>
		    <!-- QnA Section -->
                <Panel headerText="🤖 Ask Your Question" expandable="true" expanded="true" class="sapUiResponsiveMargin" width="40rem"  height="13rem">
                    <VBox class="sapUiLargeMargin">
                        <SearchField
                            id="questionInput"
                            placeholder="Ask your question..."
                            search="onAskQuestion"
                            enableSuggestions="true"
                            suggest="onSuggest"
                            showSearchButton="true"
                            width="90%"
                            enabled="false"
                            suggestionItems="{filteredSuggestions>/results}">
                            <suggestionItems>
                                <SuggestionItem text="{filteredSuggestions>question}" />
                            </suggestionItems>
                        </SearchField>

                        <!-- <HBox class="sapUiTinyMarginTop">
                            <Button text="Ask" press="onAskQuestion" icon="sap-icon://sys-enter-2" type="Emphasized"/>
                            <Button text="History" press="onHistoryPress" icon="sap-icon://history" class="sapUiTinyMarginBegin"/>
                            <Button id="voiceBtn" icon="sap-icon://microphone" press="onVoiceAsk" tooltip="Ask by voice" class="sapUiTinyMarginBegin" />
                        </HBox> -->

                       
                    </VBox>
                    <HBox class="QAhbox">
                            <Button text="Ask" press="onAskQuestion" icon="sap-icon://sys-enter-2" type="Emphasized"/>
                          
                            <!-- <Button id="voiceBtn" icon="sap-icon://microphone" press="onVoiceAsk" tooltip="Ask by voice" class="sapUiTinyMarginBegin" /> -->
                           
                        </HBox>
                </Panel>

                <!-- Highlights Section -->
                <Panel headerText="📌 Highlighted Answers" class="sapUiResponsiveMargin" expandable="true" expanded="true" width="40rem"  height="10rem">
                    <!-- <List items="{/highlights}" noDataText="No similar questions found." class="sapUiTinyMargin">
                        <StandardListItem title="{similarity}" description="{excerpt}" />
                    </List> -->
                     <!-- <Text text="{/answer}" class="sapUiSmallMarginTop" wrapping="true"/> -->
                     <ExpandableText class="sapUiSmallMarginTop" text="{/answer}" />
                </Panel>
                 </VBox>
		</f:content>
	</f:Card>
           </HBox> 
    
    </content>
      <!-- <footer>
    <Bar design="Footer" class="customFooterBar">
      <contentLeft>
        <Text text="© 2025 Document QA Assistant" class="sapUiTinyMarginBegin" />
      </contentLeft>
      <contentRight>
        <Button text="Feedback" icon="sap-icon://email" type="Transparent" press="onFeedbackPress" />
        <Button text="Support" icon="sap-icon://help" type="Transparent" press="onSupportPress" />
      </contentRight>
    </Bar>
  </footer> -->
    </Page>
  
</mvc:View>